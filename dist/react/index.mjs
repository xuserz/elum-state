import e from"react";const t={m:new Map,l:new Map,e:((e=new Map)=>({on:(t,s,o=e.get(t))=>o?o.push(s):e.set(t,[s]),off:(t,s,o=e.get(t))=>o&&s?o.splice(o.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,o=e.get(t)||[])=>{for(const e of o)e(s)}}))()},s=e=>{const{key:s,request:o}=e,n=e=>{const o="function"==typeof e?e(f()):e;t.m.set(s,o),t.l.set(s,!0),t.e.emit(s,o)},f=()=>(o&&!1!==t.l.get(s)&&(t.l.set(s,!1),o(f,n)),t.m.get(s)??e.default);return{k:s,d:e.default,g:f,s:n,sb:e=>(t.e.on(s,e),()=>t.e.off(s,e))}},o=e=>e.g(),n=(e,t)=>e.s(t),f=t=>{const[s,n]=e.useState(o(t));return e.useLayoutEffect((()=>t.sb(n)),[]),s},r=e=>[f(e),t=>n(e,t)];export{s as atom,o as getter,n as setter,r as useGlobalState,f as useGlobalValue};
